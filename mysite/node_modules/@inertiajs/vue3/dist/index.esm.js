import{router as or}from"@inertiajs/core";import{createHeadManager as M,router as S}from"@inertiajs/core";import{defineComponent as B,h as F,markRaw as w,ref as A,shallowRef as U}from"vue";import{router as _}from"@inertiajs/core";import R from"lodash.clonedeep";var L={created(){if(!this.$options.remember)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),typeof this.$options.remember=="string"&&(this.$options.remember={data:[this.$options.remember]}),typeof this.$options.remember.data=="string"&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,o=_.restore(e),n=this.$options.remember.data.filter(t=>!(this[t]!==null&&typeof this[t]=="object"&&this[t].__rememberable===!1)),l=t=>this[t]!==null&&typeof this[t]=="object"&&typeof this[t].__remember=="function"&&typeof this[t].__restore=="function";n.forEach(t=>{this[t]!==void 0&&o!==void 0&&o[t]!==void 0&&(l(t)?this[t].__restore(o[t]):this[t]=o[t]),this.$watch(t,()=>{_.remember(n.reduce((p,a)=>({...p,[a]:R(l(a)?this[a].__remember():this[a])}),{}),e)},{immediate:!0,deep:!0})})}},x=L;import{router as v}from"@inertiajs/core";import y from"lodash.clonedeep";import V from"lodash.isequal";import{reactive as H,watch as q}from"vue";function P(e,o){let n=typeof e=="string"?e:null,l=typeof e=="object"?e:o,t=n?v.restore(n):null,p=y(l),a=null,m=null,d=r=>r,h=H({...t?t.data:l,isDirty:!1,errors:t?t.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(l).reduce((r,i)=>(r[i]=this[i],r),{})},transform(r){return d=r,this},defaults(r,i){return typeof r>"u"?p=this.data():p=Object.assign({},y(p),typeof r=="string"?{[r]:i}:r),this},reset(...r){let i=y(p);return r.length===0?Object.assign(this,i):Object.assign(this,Object.keys(i).filter(s=>r.includes(s)).reduce((s,f)=>(s[f]=i[f],s),{})),this},setError(r,i){return Object.assign(this.errors,typeof r=="string"?{[r]:i}:r),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...r){return this.errors=Object.keys(this.errors).reduce((i,s)=>({...i,...r.length>0&&!r.includes(s)?{[s]:this.errors[s]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(r,i,s={}){let f=d(this.data()),g={...s,onCancelToken:u=>{if(a=u,s.onCancelToken)return s.onCancelToken(u)},onBefore:u=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(m),s.onBefore)return s.onBefore(u)},onStart:u=>{if(this.processing=!0,s.onStart)return s.onStart(u)},onProgress:u=>{if(this.progress=u,s.onProgress)return s.onProgress(u)},onSuccess:async u=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,m=setTimeout(()=>this.recentlySuccessful=!1,2e3);let D=s.onSuccess?await s.onSuccess(u):null;return p=y(this.data()),this.isDirty=!1,D},onError:u=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(u),s.onError)return s.onError(u)},onCancel:()=>{if(this.processing=!1,this.progress=null,s.onCancel)return s.onCancel()},onFinish:u=>{if(this.processing=!1,this.progress=null,a=null,s.onFinish)return s.onFinish(u)}};r==="delete"?v.delete(i,{...g,data:f}):v[r](i,f,g)},get(r,i){this.submit("get",r,i)},post(r,i){this.submit("post",r,i)},put(r,i){this.submit("put",r,i)},patch(r,i){this.submit("patch",r,i)},delete(r,i){this.submit("delete",r,i)},cancel(){a&&a.cancel()},__rememberable:n===null,__remember(){return{data:this.data(),errors:this.errors}},__restore(r){Object.assign(this,r.data),this.setError(r.errors)}});return q(h,r=>{h.isDirty=!V(h.data(),p),n&&v.remember(y(r.__remember()),n)},{immediate:!0,deep:!0}),h}var c=A(null),b=A({}),C=U(null),T=A(null),k=null,N=B({name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:Object,required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},setup({initialPage:e,initialComponent:o,resolveComponent:n,titleCallback:l,onHeadUpdate:t}){c.value=o?w(o):null,b.value=e,T.value=null;let p=typeof window>"u";return k=M(p,l,t),p||(S.init({initialPage:e,resolveComponent:n,swapComponent:async a=>{c.value=w(a.component),b.value=a.page,T.value=a.preserveState?T.value:Date.now()}}),S.on("navigate",()=>k.forceUpdate())),()=>{if(c.value){c.value.inheritAttrs=!!c.value.inheritAttrs;let a=F(c.value,{...b.value.props,key:T.value});return C.value&&(c.value.layout=C.value,C.value=null),c.value.layout?typeof c.value.layout=="function"?c.value.layout(F,a):(Array.isArray(c.value.layout)?c.value.layout:[c.value.layout]).concat(a).reverse().reduce((m,d)=>(d.inheritAttrs=!!d.inheritAttrs,F(d,{...b.value.props},()=>m))):a}}}}),$=N,E={install(e){S.form=P,Object.defineProperty(e.config.globalProperties,"$inertia",{get:()=>S}),Object.defineProperty(e.config.globalProperties,"$page",{get:()=>b.value}),Object.defineProperty(e.config.globalProperties,"$headManager",{get:()=>k}),e.mixin(x)}};function J(){return b.value}import{setupProgress as W}from"@inertiajs/core";import{createSSRApp as K,h as Q}from"vue";async function I({id:e="app",resolve:o,setup:n,title:l,progress:t={},page:p,render:a}){let m=typeof window>"u",d=m?null:document.getElementById(e),h=p||JSON.parse(d.dataset.page),r=f=>Promise.resolve(o(f)).then(g=>g.default||g),i=[],s=await r(h.component).then(f=>n({el:d,App:$,props:{initialPage:h,initialComponent:f,resolveComponent:r,titleCallback:l,onHeadUpdate:m?g=>i=g:null},plugin:E}));if(!m&&t&&W(t),m){let f=await a(K({render:()=>Q("div",{id:e,"data-page":JSON.stringify(h),innerHTML:s?a(s):""})}));return{head:i,body:f}}}import{defineComponent as z}from"vue";var G=z({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1},renderTagStart(e){e.props=e.props||{},e.props.inertia=e.props["head-key"]!==void 0?e.props["head-key"]:"";let o=Object.keys(e.props).reduce((n,l)=>{let t=e.props[l];return["key","head-key"].includes(l)?n:t===""?n+` ${l}`:n+` ${l}="${t}"`},"");return`<${e.type}${o}>`},renderTagChildren(e){return typeof e.children=="string"?e.children:e.children.reduce((o,n)=>o+this.renderTag(n),"")},renderTag(e){if(e.type.toString()==="Symbol(Text)")return e.children;if(e.type.toString()==="Symbol()")return"";if(e.type.toString()==="Symbol(Comment)")return"";let o=this.renderTagStart(e);return e.children&&(o+=this.renderTagChildren(e)),this.isUnaryTag(e)||(o+=`</${e.type}>`),o},addTitleElement(e){return this.title&&!e.find(o=>o.startsWith("<title"))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){return this.addTitleElement(e.flatMap(o=>o.type.toString()==="Symbol(Fragment)"?o.children:o).map(o=>this.renderTag(o)).filter(o=>o))}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}}),X=G;import{mergeDataIntoQueryString as Y,router as Z,shouldIntercept as ee}from"@inertiajs/core";import{defineComponent as re,h as te}from"vue";var oe=re({name:"Link",props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:String,required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"}},setup(e,{slots:o,attrs:n}){return()=>{let l=e.as.toLowerCase(),t=e.method.toLowerCase(),[p,a]=Y(t,e.href||"",e.data,e.queryStringArrayFormat);return l==="a"&&t!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${p}" method="${t}" as="button">...</Link>`),te(e.as,{...n,...l==="a"?{href:p}:{},onClick:m=>{ee(m)&&(m.preventDefault(),Z.visit(p,{data:a,method:t,replace:e.replace,preserveScroll:e.preserveScroll,preserveState:e.preserveState??t!=="get",only:e.only,headers:e.headers,onCancelToken:n.onCancelToken||(()=>({})),onBefore:n.onBefore||(()=>({})),onStart:n.onStart||(()=>({})),onProgress:n.onProgress||(()=>({})),onFinish:n.onFinish||(()=>({})),onCancel:n.onCancel||(()=>({})),onSuccess:n.onSuccess||(()=>({})),onError:n.onError||(()=>({}))}))}},o)}}}),ne=oe;import{router as j}from"@inertiajs/core";import se from"lodash.clonedeep";import{isReactive as ie,reactive as ae,ref as le,watch as pe}from"vue";function O(e,o){if(typeof e=="object"&&e!==null&&e.__rememberable===!1)return e;let n=j.restore(o),l=ie(e)?ae:le,t=typeof e.__remember=="function"&&typeof e.__restore=="function",p=n===void 0?e:l(t?e.__restore(n):n);return pe(p,a=>{j.remember(se(t?e.__remember():a),o)},{immediate:!0,deep:!0}),p}export{X as Head,ne as Link,I as createInertiaApp,or as router,P as useForm,J as usePage,O as useRemember};
//# sourceMappingURL=index.esm.js.map
